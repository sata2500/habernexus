# Generated by Django 5.0.7 on 2025-12-06 10:49

import django.core.validators
import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('news', '0001_initial'),
    ]

    operations = [
        migrations.CreateModel(
            name='ArticleClassification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('article_type', models.CharField(choices=[('news', 'Haber'), ('analysis', 'Analiz'), ('feature', 'Röportaj'), ('opinion', 'Köşe Yazısı'), ('tutorial', 'Rehber'), ('interview', 'Röportaj'), ('breaking', 'Son Dakika')], default='news', help_text='Makale türü', max_length=20)),
                ('type_confidence', models.FloatField(default=0, help_text='Tür sınıflandırması güven puanı (0-1)', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(1)])),
                ('primary_category', models.CharField(help_text='Birincil kategori', max_length=100)),
                ('secondary_categories', models.CharField(blank=True, help_text='İkincil kategoriler (virgülle ayrılmış)', max_length=500)),
                ('research_depth', models.IntegerField(choices=[(0, 'Minimal - Sadece RSS kaynağı'), (1, 'Normal - Temel araştırma'), (2, 'Derinlemesine - Kapsamlı araştırma')], default=1, help_text='Gereken araştırma derinliği')),
                ('recommended_ai_model', models.CharField(default='gemini-2.5-flash', help_text='Önerilen AI modeli', max_length=50)),
                ('requires_fact_checking', models.BooleanField(default=True, help_text='Gerçeklik kontrolü gerekli mi?')),
                ('is_time_sensitive', models.BooleanField(default=False, help_text='Zamana bağlı haber mi?')),
                ('is_controversial', models.BooleanField(default=False, help_text='Tartışmalı bir konu mu?')),
                ('target_audience', models.CharField(blank=True, help_text='Hedef kitle', max_length=100)),
                ('tone', models.CharField(blank=True, choices=[('formal', 'Resmi'), ('casual', 'Rahat'), ('technical', 'Teknik'), ('emotional', 'Duygusal'), ('neutral', 'Tarafsız')], help_text='Yazının tonu', max_length=50)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('article', models.OneToOneField(help_text='İlgili makale', on_delete=django.db.models.deletion.CASCADE, related_name='classification', to='news.article')),
            ],
            options={
                'verbose_name': 'Makale Sınıflandırması',
                'verbose_name_plural': 'Makale Sınıflandırmaları',
            },
        ),
        migrations.CreateModel(
            name='ContentQualityMetrics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('flesch_kincaid_grade', models.FloatField(default=0, help_text='Flesch-Kincaid okuma seviyesi (0-18)', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(18)])),
                ('gunning_fog_index', models.FloatField(default=0, help_text='Gunning Fog İndeksi')),
                ('smog_index', models.FloatField(default=0, help_text='SMOG İndeksi')),
                ('word_count', models.IntegerField(default=0, help_text='Toplam kelime sayısı')),
                ('sentence_count', models.IntegerField(default=0, help_text='Toplam cümle sayısı')),
                ('paragraph_count', models.IntegerField(default=0, help_text='Toplam paragraf sayısı')),
                ('avg_sentence_length', models.FloatField(default=0, help_text='Ortalama cümle uzunluğu (kelime)')),
                ('avg_word_length', models.FloatField(default=0, help_text='Ortalama kelime uzunluğu (karakter)')),
                ('primary_keyword', models.CharField(blank=True, help_text='Birincil anahtar kelime', max_length=100)),
                ('primary_keyword_count', models.IntegerField(default=0, help_text='Birincil anahtar kelime kullanım sayısı')),
                ('secondary_keyword_count', models.IntegerField(default=0, help_text='İkincil anahtar kelime kullanım sayısı')),
                ('keyword_density', models.FloatField(default=0, help_text='Ana anahtar kelime yoğunluğu (%)', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('meta_description_length', models.IntegerField(default=0, help_text='Meta açıklaması uzunluğu')),
                ('has_internal_links', models.BooleanField(default=False, help_text='İç bağlantılar var mı?')),
                ('internal_link_count', models.IntegerField(default=0, help_text='İç bağlantı sayısı')),
                ('has_headings', models.BooleanField(default=False, help_text='Başlıklar var mı?')),
                ('heading_count', models.IntegerField(default=0, help_text='Başlık sayısı')),
                ('h2_count', models.IntegerField(default=0, help_text='H2 başlık sayısı')),
                ('h3_count', models.IntegerField(default=0, help_text='H3 başlık sayısı')),
                ('has_lists', models.BooleanField(default=False, help_text='Listeler var mı?')),
                ('list_count', models.IntegerField(default=0, help_text='Liste sayısı')),
                ('has_images', models.BooleanField(default=False, help_text='Görseller var mı?')),
                ('image_count', models.IntegerField(default=0, help_text='Görsel sayısı')),
                ('has_bold_text', models.BooleanField(default=False, help_text='Kalın metin var mı?')),
                ('bold_count', models.IntegerField(default=0, help_text='Kalın metin sayısı')),
                ('overall_quality_score', models.FloatField(default=0, help_text='Genel kalite puanı (0-100)', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('article', models.OneToOneField(help_text='İlgili makale', on_delete=django.db.models.deletion.CASCADE, related_name='quality_metrics', to='news.article')),
            ],
            options={
                'verbose_name': 'İçerik Kalitesi Metrikleri',
                'verbose_name_plural': 'İçerik Kalitesi Metrikleri',
                'ordering': ['-overall_quality_score'],
            },
        ),
        migrations.CreateModel(
            name='ResearchSource',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('source_url', models.URLField(help_text="Kaynağın URL'si")),
                ('source_title', models.CharField(help_text='Kaynağın başlığı', max_length=500)),
                ('source_type', models.CharField(choices=[('news', 'Haber Sitesi'), ('academic', 'Akademik'), ('official', 'Resmi Kaynak'), ('blog', 'Blog'), ('social', 'Sosyal Medya'), ('other', 'Diğer')], default='news', help_text='Kaynağın türü', max_length=50)),
                ('relevance_score', models.FloatField(default=0, help_text='Makaleye uygunluk puanı (0-1)', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(1)])),
                ('used_for', models.CharField(blank=True, help_text='Kaynağın hangi amaç için kullanıldığı', max_length=255)),
                ('extracted_text', models.TextField(blank=True, help_text='Kaynaktan çıkarılan metin')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('article', models.ForeignKey(help_text='İlgili makale', on_delete=django.db.models.deletion.CASCADE, related_name='research_sources', to='news.article')),
            ],
            options={
                'verbose_name': 'Araştırma Kaynağı',
                'verbose_name_plural': 'Araştırma Kaynakları',
                'ordering': ['-relevance_score', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ContentGenerationLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('stage', models.CharField(choices=[('fetch', 'RSS Tarama'), ('score', 'Başlık Puanlaması'), ('classify', 'Sınıflandırma'), ('research', 'Araştırma'), ('generate', 'İçerik Üretimi'), ('quality_check', 'Kalite Kontrol'), ('image_generation', 'Görsel Üretimi'), ('publish', 'Yayınlama')], help_text='İşlem aşaması', max_length=20)),
                ('status', models.CharField(choices=[('started', 'Başladı'), ('in_progress', 'Devam Ediyor'), ('completed', 'Tamamlandı'), ('failed', 'Başarısız'), ('skipped', 'Atlandı')], help_text='Aşama durumu', max_length=20)),
                ('duration', models.IntegerField(default=0, help_text='İşlem süresi (milisaniye)')),
                ('input_data', models.JSONField(blank=True, default=dict, help_text='Aşamaya gelen veriler')),
                ('output_data', models.JSONField(blank=True, default=dict, help_text='Aşamadan çıkan veriler')),
                ('error_message', models.TextField(blank=True, help_text='Hata mesajı (varsa)')),
                ('error_traceback', models.TextField(blank=True, help_text='Hata izlemesi (varsa)')),
                ('ai_model_used', models.CharField(blank=True, help_text='Kullanılan AI modeli', max_length=50)),
                ('api_calls_count', models.IntegerField(default=0, help_text='Yapılan API çağrısı sayısı')),
                ('tokens_used', models.IntegerField(default=0, help_text='Kullanılan token sayısı')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('article', models.ForeignKey(help_text='İlgili makale', on_delete=django.db.models.deletion.CASCADE, related_name='generation_logs', to='news.article')),
            ],
            options={
                'verbose_name': 'İçerik Üretim Logu',
                'verbose_name_plural': 'İçerik Üretim Logları',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['article', 'stage'], name='news_conten_article_801c04_idx'), models.Index(fields=['status'], name='news_conten_status_a90ffb_idx'), models.Index(fields=['-created_at'], name='news_conten_created_d75e3b_idx')],
            },
        ),
        migrations.CreateModel(
            name='HeadlineScore',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('original_headline', models.CharField(help_text='Orijinal başlık metni', max_length=500)),
                ('overall_score', models.FloatField(default=0, help_text='Genel başlık kalitesi puanı (0-100)', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('relevance_score', models.FloatField(default=0, help_text='Konu uygunluğu puanı', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('uniqueness_score', models.FloatField(default=0, help_text='Orijinallik puanı', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('engagement_score', models.FloatField(default=0, help_text='Katılım potansiyeli puanı', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('keyword_relevance', models.FloatField(default=0, help_text='Anahtar kelime uygunluğu', validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)])),
                ('word_count', models.IntegerField(default=0, help_text='Başlıktaki kelime sayısı')),
                ('character_count', models.IntegerField(default=0, help_text='Başlıktaki karakter sayısı')),
                ('has_numbers', models.BooleanField(default=False, help_text='Başlıkta sayı var mı?')),
                ('has_power_words', models.BooleanField(default=False, help_text='Başlıkta güçlü kelimeler var mı?')),
                ('power_words', models.CharField(blank=True, help_text='Bulunan güçlü kelimeler', max_length=255)),
                ('is_question', models.BooleanField(default=False, help_text='Başlık soru mu?')),
                ('is_listicle', models.BooleanField(default=False, help_text="Başlık listicle mi? (örn: '5 Yol')")),
                ('is_processed', models.BooleanField(default=False, help_text='Makaleye dönüştürüldü mü?')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('article', models.ForeignKey(blank=True, help_text='İlgili makale (varsa)', null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='headline_score', to='news.article')),
                ('rss_source', models.ForeignKey(help_text='Başlığın kaynağı', on_delete=django.db.models.deletion.CASCADE, related_name='headline_scores', to='news.rsssource')),
            ],
            options={
                'verbose_name': 'Başlık Puanı',
                'verbose_name_plural': 'Başlık Puanları',
                'ordering': ['-overall_score', '-created_at'],
                'indexes': [models.Index(fields=['-overall_score'], name='news_headli_overall_ac6438_idx'), models.Index(fields=['is_processed'], name='news_headli_is_proc_2328fc_idx'), models.Index(fields=['rss_source', '-overall_score'], name='news_headli_rss_sou_e887b5_idx')],
            },
        ),
    ]
