{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}API AyarlarÄ± - Django YÃ¶netimi{% endblock %}

{% block extrahead %}
<style>
    .api-settings-container {
        max-width: 900px;
        margin: 0 auto;
    }
    
    .settings-section {
        background: white;
        border: 1px solid #ddd;
        border-radius: 4px;
        padding: 20px;
        margin-bottom: 20px;
    }
    
    .settings-section h2 {
        margin-top: 0;
        color: #333;
        border-bottom: 2px solid #417690;
        padding-bottom: 10px;
    }
    
    .form-group {
        margin-bottom: 20px;
    }
    
    .form-group label {
        display: block;
        margin-bottom: 8px;
        font-weight: bold;
        color: #333;
    }
    
    .form-group input[type="text"],
    .form-group input[type="number"],
    .form-group textarea {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-family: monospace;
        font-size: 13px;
    }
    
    .form-group textarea {
        resize: vertical;
        min-height: 100px;
    }
    
    .form-group input:focus,
    .form-group textarea:focus {
        outline: none;
        border-color: #417690;
        box-shadow: 0 0 5px rgba(65, 118, 144, 0.3);
    }
    
    .help-text {
        font-size: 12px;
        color: #666;
        margin-top: 5px;
    }
    
    .status-badge {
        display: inline-block;
        padding: 4px 12px;
        border-radius: 3px;
        font-size: 12px;
        font-weight: bold;
        margin-left: 10px;
    }
    
    .status-set {
        background-color: #28a745;
        color: white;
    }
    
    .status-not-set {
        background-color: #dc3545;
        color: white;
    }
    
    .button-group {
        margin-top: 30px;
        text-align: center;
    }
    
    .button-group button {
        background-color: #417690;
        color: white;
        padding: 12px 30px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 14px;
        font-weight: bold;
    }
    
    .button-group button:hover {
        background-color: #2e5266;
    }
    
    .info-box {
        background-color: #e7f3ff;
        border-left: 4px solid #2196F3;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 4px;
    }
    
    .info-box h3 {
        margin-top: 0;
        color: #1976D2;
    }
    
    .info-box p {
        margin: 5px 0;
        color: #333;
    }
    
    .warning-box {
        background-color: #fff3cd;
        border-left: 4px solid #ffc107;
        padding: 15px;
        margin-bottom: 20px;
        border-radius: 4px;
    }
    
    .warning-box h3 {
        margin-top: 0;
        color: #856404;
    }
    
    .warning-box p {
        margin: 5px 0;
        color: #333;
    }
</style>
{% endblock %}

{% block content %}
<div class="api-settings-container">
    <h1>API AyarlarÄ±</h1>
    
    {% if messages %}
    <div class="messagelist">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}
    
    <div class="info-box">
        <h3>ğŸ”‘ Google AI API AnahtarlarÄ±nÄ± Buradan YÃ¶netin</h3>
        <p>
            Haber Nexus'un yapay zeka destekli iÃ§erik Ã¼retim sistemini kullanmak iÃ§in 
            Google Gemini ve Imagen API anahtarlarÄ±nÄ± buraya ekleyin.
        </p>
        <p>
            <strong>Not:</strong> API anahtarlarÄ± ÅŸifreli olarak saklanÄ±r ve yÃ¶netim panelinde maskelenmiÅŸ ÅŸekilde gÃ¶sterilir.
        </p>
    </div>
    
    <form method="post" class="form">
        {% csrf_token %}
        
        <!-- Google Gemini API AnahtarÄ± -->
        <div class="settings-section">
            <h2>
                Google Gemini API
                {% if gemini_key_set %}
                <span class="status-badge status-set">âœ“ AYARLANMIÅ</span>
                {% else %}
                <span class="status-badge status-not-set">âœ— AYARLANMAMIÅ</span>
                {% endif %}
            </h2>
            
            <div class="info-box" style="margin-bottom: 15px;">
                <p>
                    <strong>KullanÄ±m:</strong> Haber iÃ§eriklerini profesyonel olarak yazÄ±p dÃ¼zenlemek iÃ§in kullanÄ±lÄ±r.
                </p>
                <p>
                    <strong>API AnahtarÄ± NasÄ±l AlÄ±nÄ±r?</strong>
                </p>
                <ol style="margin: 10px 0; padding-left: 20px;">
                    <li><a href="https://ai.google.dev/" target="_blank">Google AI Studio</a>'ya gidin</li>
                    <li>"Get API Key" butonuna tÄ±klayÄ±n</li>
                    <li>Yeni API anahtarÄ± oluÅŸturun veya mevcut olanÄ± kopyalayÄ±n</li>
                    <li>AnahtarÄ± aÅŸaÄŸÄ±ya yapÄ±ÅŸtÄ±rÄ±n</li>
                </ol>
            </div>
            
            <div class="form-group">
                <label for="gemini_api_key">Google Gemini API AnahtarÄ±</label>
                <textarea name="gemini_api_key" id="gemini_api_key" placeholder="sk-..." 
                          autocomplete="off"></textarea>
                <div class="help-text">
                    Mevcut anahtar varsa, yeni bir anahtar girerek eski olanÄ± deÄŸiÅŸtirebilirsiniz.
                </div>
            </div>
        </div>
        
        <!-- Google Imagen API AnahtarÄ± -->
        <div class="settings-section">
            <h2>
                Google Imagen API
                {% if imagen_key_set %}
                <span class="status-badge status-set">âœ“ AYARLANMIÅ</span>
                {% else %}
                <span class="status-badge status-not-set">âœ— AYARLANMAMIÅ</span>
                {% endif %}
            </h2>
            
            <div class="info-box" style="margin-bottom: 15px;">
                <p>
                    <strong>KullanÄ±m:</strong> Haberler iÃ§in profesyonel gÃ¶rseller otomatik olarak oluÅŸturmak iÃ§in kullanÄ±lÄ±r.
                </p>
                <p>
                    <strong>Not:</strong> Imagen API, Gemini API ile aynÄ± API anahtarÄ±nÄ± kullanabilir.
                </p>
            </div>
            
            <div class="form-group">
                <label for="imagen_api_key">Google Imagen API AnahtarÄ±</label>
                <textarea name="imagen_api_key" id="imagen_api_key" placeholder="sk-..." 
                          autocomplete="off"></textarea>
                <div class="help-text">
                    Gemini API anahtarÄ± ile aynÄ± olabilir. BoÅŸ bÄ±rakÄ±rsanÄ±z, RSS kaynaÄŸÄ±ndan gÃ¶rsel Ã§ekilir.
                </div>
            </div>
        </div>
        
        <!-- Tarama AyarlarÄ± -->
        <div class="settings-section">
            <h2>Otomasyon AyarlarÄ±</h2>
            
            <div class="warning-box">
                <p>
                    <strong>âš ï¸ Dikkat:</strong> Bu ayarlar sistem performansÄ±nÄ± etkileyebilir. 
                    Ã‡ok dÃ¼ÅŸÃ¼k deÄŸerler API limitlerini aÅŸabilir.
                </p>
            </div>
            
            <div class="form-group">
                <label for="rss_frequency">RSS Tarama SÄ±klÄ±ÄŸÄ± (dakika)</label>
                <input type="number" name="rss_frequency" id="rss_frequency" 
                       value="{{ rss_frequency }}" min="5" max="1440">
                <div class="help-text">
                    RSS kaynaklarÄ± ne sÄ±klÄ±kta taranacak? (Minimum: 5 dakika, Maksimum: 1440 dakika/1 gÃ¼n)
                </div>
            </div>
            
            <div class="form-group">
                <label for="content_frequency">Ä°Ã§erik Ãœretim SÄ±klÄ±ÄŸÄ± (dakika)</label>
                <input type="number" name="content_frequency" id="content_frequency" 
                       value="{{ content_frequency }}" min="10" max="1440">
                <div class="help-text">
                    Yapay zeka ile ne sÄ±klÄ±kta yeni iÃ§erik Ã¼retilecek? (Minimum: 10 dakika, Maksimum: 1440 dakika/1 gÃ¼n)
                </div>
            </div>
        </div>
        
        <!-- Kaydet Butonu -->
        <div class="button-group">
            <button type="submit">ğŸ’¾ AyarlarÄ± Kaydet</button>
        </div>
    </form>
    
    <!-- Bilgi -->
    <div class="info-box" style="margin-top: 30px;">
        <h3>ğŸ“š Daha Fazla Bilgi</h3>
        <p>
            <strong>Sistem GÃ¼nlÃ¼kleri:</strong> 
            <a href="/admin/core/systemlog/">Sistem GÃ¼nlÃ¼kleri</a> sayfasÄ±ndan 
            API hatalarÄ± ve sistem olaylarÄ±nÄ± izleyebilirsiniz.
        </p>
        <p>
            <strong>Sistem AyarlarÄ±:</strong> 
            <a href="/admin/core/setting/">Sistem AyarlarÄ±</a> sayfasÄ±ndan 
            tÃ¼m ayarlarÄ± yÃ¶netebilirsiniz.
        </p>
    </div>
</div>

<style>
    .alert {
        padding: 12px 15px;
        margin-bottom: 20px;
        border-radius: 4px;
        border-left: 4px solid;
    }
    
    .alert-success {
        background-color: #d4edda;
        border-color: #28a745;
        color: #155724;
    }
    
    .alert-error {
        background-color: #f8d7da;
        border-color: #dc3545;
        color: #721c24;
    }
    
    .alert-warning {
        background-color: #fff3cd;
        border-color: #ffc107;
        color: #856404;
    }
    
    .alert-info {
        background-color: #d1ecf1;
        border-color: #17a2b8;
        color: #0c5460;
    }
</style>
{% endblock %}
